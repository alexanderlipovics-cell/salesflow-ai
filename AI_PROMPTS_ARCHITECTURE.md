# ğŸ—ï¸ AI PROMPTS SYSTEM - ARCHITECTURE

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ğŸ¤– AI PROMPTS SYSTEM ARCHITECTURE                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         FRONTEND (React/TypeScript)                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ AIPromptsPanel  â”‚  â”‚ Interactive     â”‚  â”‚ WhatsApp         â”‚    â”‚
â”‚  â”‚                 â”‚  â”‚ ChatMessage     â”‚  â”‚ IntegrationPanel â”‚    â”‚
â”‚  â”‚ â€¢ Categories    â”‚  â”‚                 â”‚  â”‚                  â”‚    â”‚
â”‚  â”‚ â€¢ Prompts List  â”‚  â”‚ â€¢ Message       â”‚  â”‚ â€¢ Status Check   â”‚    â”‚
â”‚  â”‚ â€¢ Selection     â”‚  â”‚ â€¢ Clickable     â”‚  â”‚ â€¢ Send Message   â”‚    â”‚
â”‚  â”‚                 â”‚  â”‚   Options       â”‚  â”‚ â€¢ Provider Info  â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚              GPTFunctionCallsDemo                            â”‚   â”‚
â”‚  â”‚  â€¢ Full Interactive Chat                                     â”‚   â”‚
â”‚  â”‚  â€¢ Real-time GPT responses                                   â”‚   â”‚
â”‚  â”‚  â€¢ Function Calling Integration                              â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                    AIPromptsPage.tsx                         â”‚   â”‚
â”‚  â”‚         Complete Page mit Grid Layout + Stats                â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                  â”‚
                                  â”‚ HTTP/REST
                                  â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      BACKEND (FastAPI/Python)                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                       â”‚
â”‚  API ROUTES                                                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  /api/ai-prompts/                                            â”‚   â”‚
â”‚  â”‚    â€¢ GET  /categories/{category}  â†’ Get prompts             â”‚   â”‚
â”‚  â”‚    â€¢ POST /execute                â†’ Execute prompt          â”‚   â”‚
â”‚  â”‚    â€¢ POST /chat                   â†’ Interactive chat        â”‚   â”‚
â”‚  â”‚    â€¢ GET  /suggestions            â†’ Get suggestions         â”‚   â”‚
â”‚  â”‚    â€¢ POST /feedback               â†’ Submit feedback         â”‚   â”‚
â”‚  â”‚                                                              â”‚   â”‚
â”‚  â”‚  /api/whatsapp/                                              â”‚   â”‚
â”‚  â”‚    â€¢ POST /send                   â†’ Send message            â”‚   â”‚
â”‚  â”‚    â€¢ POST /send-template          â†’ Send template           â”‚   â”‚
â”‚  â”‚    â€¢ GET  /status                 â†’ Get status              â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                       â”‚
â”‚  SERVICES                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ ai_prompts_        â”‚  â”‚ whatsapp_       â”‚  â”‚ interactive_    â”‚  â”‚
â”‚  â”‚ service.py         â”‚  â”‚ service.py      â”‚  â”‚ chat_service.py â”‚  â”‚
â”‚  â”‚                    â”‚  â”‚                 â”‚  â”‚                 â”‚  â”‚
â”‚  â”‚ â€¢ Execute Prompts  â”‚  â”‚ â€¢ UltraMsg      â”‚  â”‚ â€¢ Chat with     â”‚  â”‚
â”‚  â”‚ â€¢ Fill Templates   â”‚  â”‚ â€¢ 360dialog     â”‚  â”‚   Options       â”‚  â”‚
â”‚  â”‚ â€¢ Suggestions      â”‚  â”‚ â€¢ Twilio        â”‚  â”‚ â€¢ JSON Response â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚           gpt_functions_service.py                           â”‚   â”‚
â”‚  â”‚                                                              â”‚   â”‚
â”‚  â”‚  Function Calling:                                           â”‚   â”‚
â”‚  â”‚    â€¢ send_email(to, subject, body)                          â”‚   â”‚
â”‚  â”‚    â€¢ send_whatsapp(phone, message)                          â”‚   â”‚
â”‚  â”‚    â€¢ create_reminder(lead_id, date, note)                   â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚                   â”‚
                          â”‚                   â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚   OpenAI GPT-4         â”‚   â”‚   WhatsApp Providers  â”‚
        â”‚                        â”‚   â”‚                       â”‚
        â”‚  â€¢ Chat Completions    â”‚   â”‚  â€¢ UltraMsg API       â”‚
        â”‚  â€¢ Function Calling    â”‚   â”‚  â€¢ 360dialog API      â”‚
        â”‚  â€¢ Template Execution  â”‚   â”‚  â€¢ Twilio API         â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        DATABASE (PostgreSQL/Supabase)                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚  ai_prompts                                                â”‚     â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚     â”‚
â”‚  â”‚  â”‚ id         â”‚ UUID (PK)                            â”‚     â”‚     â”‚
â”‚  â”‚  â”‚ name       â”‚ TEXT                                 â”‚     â”‚     â”‚
â”‚  â”‚  â”‚ category   â”‚ TEXT (indexed)                       â”‚     â”‚     â”‚
â”‚  â”‚  â”‚ descriptionâ”‚ TEXT                                 â”‚     â”‚     â”‚
â”‚  â”‚  â”‚ prompt_    â”‚ TEXT with {{placeholders}}           â”‚     â”‚     â”‚
â”‚  â”‚  â”‚  template  â”‚                                      â”‚     â”‚     â”‚
â”‚  â”‚  â”‚ input_     â”‚ JSONB                                â”‚     â”‚     â”‚
â”‚  â”‚  â”‚  schema    â”‚                                      â”‚     â”‚     â”‚
â”‚  â”‚  â”‚ usage_countâ”‚ INTEGER                              â”‚     â”‚     â”‚
â”‚  â”‚  â”‚ success_   â”‚ DECIMAL                              â”‚     â”‚     â”‚
â”‚  â”‚  â”‚  rate      â”‚                                      â”‚     â”‚     â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚     â”‚
â”‚  â”‚                                                            â”‚     â”‚
â”‚  â”‚  12+ Standard Prompts:                                     â”‚     â”‚
â”‚  â”‚   â€¢ Objection Handling (Preis, Zeit)                       â”‚     â”‚
â”‚  â”‚   â€¢ Upselling                                              â”‚     â”‚
â”‚  â”‚   â€¢ Coaching (Meeting Prep, Win Probability)               â”‚     â”‚
â”‚  â”‚   â€¢ Follow-ups                                             â”‚     â”‚
â”‚  â”‚   â€¢ Lead Generation (Social DM)                            â”‚     â”‚
â”‚  â”‚   â€¢ Nurture & Re-Engagement                                â”‚     â”‚
â”‚  â”‚   â€¢ Referral Requests                                      â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚                                                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚  ai_prompt_executions                                      â”‚     â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚     â”‚
â”‚  â”‚  â”‚ id         â”‚ UUID (PK)                            â”‚     â”‚     â”‚
â”‚  â”‚  â”‚ prompt_id  â”‚ UUID (FK â†’ ai_prompts)               â”‚     â”‚     â”‚
â”‚  â”‚  â”‚ user_id    â”‚ UUID                                 â”‚     â”‚     â”‚
â”‚  â”‚  â”‚ lead_id    â”‚ UUID (optional)                      â”‚     â”‚     â”‚
â”‚  â”‚  â”‚ input_     â”‚ JSONB                                â”‚     â”‚     â”‚
â”‚  â”‚  â”‚  values    â”‚                                      â”‚     â”‚     â”‚
â”‚  â”‚  â”‚ generated_ â”‚ TEXT                                 â”‚     â”‚     â”‚
â”‚  â”‚  â”‚  output    â”‚                                      â”‚     â”‚     â”‚
â”‚  â”‚  â”‚ execution_ â”‚ INTEGER (ms)                         â”‚     â”‚     â”‚
â”‚  â”‚  â”‚  time_ms   â”‚                                      â”‚     â”‚     â”‚
â”‚  â”‚  â”‚ status     â”‚ VARCHAR                              â”‚     â”‚     â”‚
â”‚  â”‚  â”‚ user_ratingâ”‚ INTEGER (1-5)                        â”‚     â”‚     â”‚
â”‚  â”‚  â”‚ user_      â”‚ TEXT                                 â”‚     â”‚     â”‚
â”‚  â”‚  â”‚  feedback  â”‚                                      â”‚     â”‚     â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚     â”‚
â”‚  â”‚                                                            â”‚     â”‚
â”‚  â”‚  â€¢ Full Execution Log                                      â”‚     â”‚
â”‚  â”‚  â€¢ User Feedback & Ratings                                 â”‚     â”‚
â”‚  â”‚  â€¢ Performance Metrics                                     â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚                                                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           DATA FLOW                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

USER ACTION
    â”‚
    â–¼
[1] User wÃ¤hlt Prompt (z.B. "Objection: Preis")
    â”‚
    â–¼
[2] Frontend sendet: POST /api/ai-prompts/execute
    {
      "prompt_id": "uuid",
      "input_values": {
        "lead_name": "Anna",
        "objection": "zu teuer",
        "personality_type": "Dominant",
        "context_summary": "..."
      }
    }
    â”‚
    â–¼
[3] Backend lÃ¤dt Prompt Template aus DB
    Template: "Lead sagt: {{objection}}. DISG: {{personality_type}}. ..."
    â”‚
    â–¼
[4] Fill Template mit input_values
    Result: "Lead sagt: zu teuer. DISG: Dominant. ..."
    â”‚
    â–¼
[5] Execute GPT-4
    OpenAI API â†’ GPT-4 Response
    â”‚
    â–¼
[6] Log Execution in ai_prompt_executions
    â€¢ Execution time
    â€¢ Input/Output
    â€¢ Status
    â”‚
    â–¼
[7] Update usage_count in ai_prompts
    â”‚
    â–¼
[8] Return Response to Frontend
    {
      "success": true,
      "output": "Ich verstehe deinen Einwand vollkommen, Anna. ...",
      "execution_id": "uuid"
    }
    â”‚
    â–¼
[9] Frontend zeigt Response
    â€¢ Als Chat Message
    â€¢ Mit Options (z.B. "Per WhatsApp senden", "Als E-Mail")
    â”‚
    â–¼
[10] User klickt "Per WhatsApp senden"
    â”‚
    â–¼
[11] POST /api/whatsapp/send
    {
      "to": "+491234567890",
      "message": "..."
    }
    â”‚
    â–¼
[12] WhatsApp Provider (UltraMsg/360dialog/Twilio)
    â”‚
    â–¼
[13] Message delivered to Lead! âœ…

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      FUNCTION CALLING FLOW                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

USER: "Sende WhatsApp an Anna: Meeting-Reminder"
    â”‚
    â–¼
[1] POST /api/ai-prompts/chat
    {
      "messages": [...],
      "use_functions": true
    }
    â”‚
    â–¼
[2] GPT-4 with Function Calling
    GPT erkennt: User mÃ¶chte WhatsApp senden
    â”‚
    â–¼
[3] GPT returned function_call:
    {
      "name": "send_whatsapp",
      "arguments": {
        "phone": "+491234567890",
        "message": "Hallo Anna, Reminder fÃ¼r unser Meeting morgen um 15 Uhr!"
      }
    }
    â”‚
    â–¼
[4] Backend fÃ¼hrt Function aus
    whatsapp_service.send_message(...)
    â”‚
    â–¼
[5] WhatsApp versendet
    â”‚
    â–¼
[6] GPT erhÃ¤lt Function Result
    {"success": true}
    â”‚
    â–¼
[7] GPT formuliert Antwort
    "âœ… WhatsApp wurde an Anna gesendet: Meeting-Reminder!"
    â”‚
    â–¼
[8] Frontend zeigt Response

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      KEY TECHNOLOGIES                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                       â”‚
â”‚  Frontend:                                                            â”‚
â”‚    â€¢ React/TypeScript                                                 â”‚
â”‚    â€¢ Tailwind CSS                                                     â”‚
â”‚    â€¢ Fetch API                                                        â”‚
â”‚                                                                       â”‚
â”‚  Backend:                                                             â”‚
â”‚    â€¢ FastAPI                                                          â”‚
â”‚    â€¢ Pydantic                                                         â”‚
â”‚    â€¢ Asyncio/AsyncPG                                                  â”‚
â”‚    â€¢ OpenAI Python SDK                                                â”‚
â”‚    â€¢ Twilio SDK                                                       â”‚
â”‚                                                                       â”‚
â”‚  Database:                                                            â”‚
â”‚    â€¢ PostgreSQL                                                       â”‚
â”‚    â€¢ Supabase                                                         â”‚
â”‚    â€¢ JSONB for flexible schemas                                       â”‚
â”‚                                                                       â”‚
â”‚  AI:                                                                  â”‚
â”‚    â€¢ GPT-4 (Chat Completions)                                         â”‚
â”‚    â€¢ Function Calling                                                 â”‚
â”‚    â€¢ Template-based Prompts                                           â”‚
â”‚                                                                       â”‚
â”‚  Messaging:                                                           â”‚
â”‚    â€¢ WhatsApp (UltraMsg/360dialog/Twilio)                            â”‚
â”‚    â€¢ E-Mail (Gmail/Outlook)                                           â”‚
â”‚                                                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      SCALABILITY & PERFORMANCE                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                       â”‚
â”‚  âœ… Indexed Database Queries (category, usage_count)                 â”‚
â”‚  âœ… Async/Await for concurrent requests                               â”‚
â”‚  âœ… Caching for frequently used prompts (optional Redis)              â”‚
â”‚  âœ… Rate Limiting for API calls                                       â”‚
â”‚  âœ… Error Handling & Retries                                          â”‚
â”‚  âœ… Execution Time Tracking                                           â”‚
â”‚  âœ… User Feedback Loop for optimization                               â”‚
â”‚                                                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ¯ SUMMARY

**Das AI Prompts System ist:**

1. **Modular** - Services sind unabhÃ¤ngig und wiederverwendbar
2. **Skalierbar** - Async, indexed queries, caching-ready
3. **Erweiterbar** - Neue Prompts/Functions einfach hinzufÃ¼gen
4. **Multi-Channel** - WhatsApp, E-Mail, Chat in einem System
5. **Analytics-Ready** - Full execution log + user feedback
6. **Production-Ready** - Error handling, testing, deployment guides

---

**ğŸš€ SYSTEM IS LIVE!**

